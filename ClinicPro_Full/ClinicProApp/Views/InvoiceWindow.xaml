<Window x:Class="ClinicProApp.Views.InvoiceWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="إنشاء فاتورة" Height="560" Width="820" WindowStartupLocation="CenterOwner">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="اختر المريض:" VerticalAlignment="Center"/>
            <ComboBox Name="cbPatients" DisplayMemberPath="Display" SelectedValuePath="Id" Margin="6"/>
            <TextBlock Text="تاريخ:" VerticalAlignment="Center" Margin="12,0,0,0"/>
            <DatePicker Name="dpDate" Margin="6"/>
        </StackPanel>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBox Name="txtDescription" Width="420" Margin="6"/>
                    <TextBox Name="txtPrice" Width="100" Margin="6"/>
                    <TextBox Name="txtQty" Width="80" Margin="6"/>
                    <Button Content="أضف" Click="BtnAddItem_Click" Width="80" Margin="6"/>
                </StackPanel>

                <DataGrid Name="dgItems" AutoGenerateColumns="False" Height="320">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="الوصف" Binding="{Binding Description}" Width="*"/>
                        <DataGridTextColumn Header="السعر" Binding="{Binding Price}" Width="120"/>
                        <DataGridTextColumn Header="الكمية" Binding="{Binding Qty}" Width="80"/>
                        <DataGridTextColumn Header="المجموع" Binding="{Binding Total}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="12,0">
                <TextBlock Text="ملخص الفاتورة" FontWeight="Bold" Margin="0,0,0,8"/>
                <TextBlock Name="txtSubTotal" Text="المجموع الفرعي: 0" Margin="0,6"/>
                <TextBlock Name="txtTax" Text="الضريبة: 0" Margin="0,6"/>
                <TextBlock Name="txtTotal" Text="الإجمالي: 0" Margin="0,6"/>
                <StackPanel Orientation="Horizontal" Margin="0,12">
                    <Button Content="حفظ فاتورة" Click="BtnSaveInvoice_Click" Width="120" Margin="6"/>
                    <Button Content="تصدير PDF" Click="BtnExportPdf_Click" Width="120" Margin="6"/>
                </StackPanel>
            </StackPanel>
        </Grid>

        <Button Grid.Row="2" Content="إغلاق" HorizontalAlignment="Right" Width="100" Click="BtnClose_Click" Margin="6"/>
    </Grid>
</Window>
